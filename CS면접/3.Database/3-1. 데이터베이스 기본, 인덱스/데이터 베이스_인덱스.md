## 데이터 베이스란?
1. **데이터 베이스 기본**

   - DB :  일정한 규칙, 규약을 통해 구조화되어 저장되는 데이터의 모음
   - DBMS : 해당 DB를 제어, 관리하는 통합 시스템
     - DDL (데이터 정의어; Data Definition Language)
       - 외부 스키마, 개념 스키마, 내부 스키마를 정의하는데 사용
       - CREATE, ALTER, DROP
     - DML (데이터 조작어; Data Manipulation Language)
       - 사용자 데이터를 검색, 삽입, 삭제, 수정하는데 사용
       - SELECT, INSERT, DELETE, UPDATE
     - DCL (데이터 제어어; Data Control Language)
       - COMMIT, ROLLBACK, GRANT, REVOKE
   - 쿼리 언어 : DB안에 있는 데이터들은 특정 DBMS마다 정의된 쿼리언어를 통해 삽입, 삭제, 수정, 조회를 수행

   

2. **용어**

   - 엔터티 : 사람, 장소, 물건, 사건 개념 등 여러개의 속성을 지닌 명사
   - 릴레이션 : 데이터베이스에서 정보를 구부낳여 저장하는 기본 단위
   - 속성 : 릴레이션에서 관리하는 구체적이고 고유한 이름을 갖는 정보
   - 도메인 : 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합
   - 필드 / 레코드

   

3. **데이터베이스 관계**

   - 1:1 관계

   - 1:N 관계

   - N:M 관계
     - 관계 화살표 그림
     
     

4. **데이터베이스의 특징**

   1. 데이터의 독립성

      - 물리적 독립성 : 데이터베이스 사이즈를 늘리거나 성능 향상을 위해 데이터 파일을 늘리거나 새롭게 추가하더라도 관련된 응용 프로그램을 수정할 필요가 없다.
      - 논리적 독립성 : 데이터베이스는 논리적인 구조로 다양한 응용 프로그램의 논리적 요구를 만족시켜줄 수 있다.

   2. 데이터의 무결성

      - 여러 경로를 통해 잘못된 데이터가 발생하는 경우의 수를 방지하는 기능으로 데이터의 유효성 검사를 통해 데이터의 무결성을 구현하게 된다.

   3. 데이터의 보안성

      - 인가된 사용자들만 데이터베이스나 데이터베이스 내의 자원에 접근할 수 있도록 계정 관리 또는 접근 권한을 설정함으로써 모든 데이터에 보안을 구현할 수 있다.

   4. 데이터의 일관성

      - 연관된 정보를 논리적인 구조로 관리함으로써 어떤 하나의 데이터만 변경했을 경우 발생할 수 있는 데이터의 불일치성을 배제할 수 있다. 또한 작업 중 일부 데이터만 변경되어 나머지 데이터와 일치하지 않는 경우의 수를 배제할 수 있다.

   5. 데이터 중복 최소화

      - 데이터베이스는 데이터를 통합해서 관리함으로써 파일 시스템의 단점 중 하나인 자료의 중복과 데이터의 중복성 문제를 해결할 수 있다.

      

-------------

## 인덱스

1. **인덱스란 ?** 

   - 데이터를 빠르게 찾을 수 있는 하나의 장치
   - 데이터는 책의 내용, 데이터가 저장된 레코드의 주소는 인덱스 목록에 있는 페이지 번호 
   - DBMS 도 데이터베이스 테이블의 모든 데이터를 검색해서 원하는 결과를 가져 오려면 시간이 오래 걸린다. 그래서 칼럼의 값과 해당 레코드가 저장된 주소를 키와 값의 쌍으로 인덱스를 만들어 두는 것이다.

   

2. **인덱스 원리**

   - INDEX를 해당 컬럼에 주게 되면 초기 Table 생성시, **FRM, MYD, MYI** 3개의 파일이 만들어진다.

     - FRM : 테이블 구조가 저장되어 있는 파일

     - MYD : 실제 데이터가 있는 파일

     - MYI : INDEX 정보가 들어있는 파일 (INDEX를 사용하지 않는 경우, MYI 파일은 비어져 있다.)

   - INDEX를 해당 컬럼에 만들게 되면 해당 컬럼을 따로 인덱싱하여 MYI 파일에 입력한다.

   - 이후에 사용자가 SELECT 쿼리로 INDEX를 사용하는 쿼리를 사용시 해당 Table을 검색하는 것이 아니라 MYI 파일의 내용을 검색한다.

   - 만약, INDEX를 사용하지 않은 SELECT 쿼리라면 해당 Table Full scan하여 모두 검색한다.



3. **인덱스의 장점**
- 키 값을 기초로 하여 테이블에서 검색과 정렬 속도를 향상시킨다.
   
- 인덱스를 사용하면 테이블 행의 고유성을 강화시킬 수 있다.
   
- 테이블의 기본키는 자동으로 인덱스된다.
   
- 필드 중에는 데이터 형식 때문에 인덱스 될 수 없는 필드도 있다.
   
- 여러 필드로 이루어진(다중 필드)인덱스를 사용하면 첫 필드 값이 같은 레코드도 구분할 수 있다.
   
- 참고로 액세스에서 다중 필드 인덱스는 최대 10개의 필드를 포함할 수 있다.



4. **인덱스의 단점**
- 인덱스를 만들면 .mdb 파일 크기가 늘어난다.
   
- 사용자가 한 페이지를 동시에 수정할 수 있는 병행성이 줄어든다.
   
- 인덱스된 필드에서 데이터를 업데이트하거나 **레코드를 추가 또는 삭제할 때 성능이 떨어진다.**
   
- 인덱스가 데이터베이스 공간을 차지재 추가적인 공간이 필요해진다.(DB의 10% 내외의 공간이 추가로 필요하다.)
   
- 인덱스를 생성하는데 시간이 많이 소요될 수 있다.
   
- **데이터 변경 작업이 자주 일어날 경우에 인덱스를 재작성해야 할 필요가 있기에 성능에 영향을 끼칠 수 있다.**
   
- 따라서 어느 필드를 인덱스해야 하는지 미리 시험해보고 결정하는 것이 좋다. 인덱스를 추가하면 쿼리 속도가 1초 정도 빨라지지만, 데이터 행을 추가하는 속도는 2초 정도 느려지게 되어 여러 사용자가 사용하는 경우, 레코드 잠금 문제가 발생할 수 있다.
   
- 또, 다른 필드에 대한 인덱스를 만들게 되면 성능이 별로 향상되지 않을 수도 있다. 예를 들어, 테이블에 회사 이름 필드와 성 필드가 이미 인덱스된 경우에 우편 번호를 필드로 추가해 인덱스에 포함해도 성능이 거의 향상되지 않는다. 만드는 쿼리의 종류와 관계 없이 가장 고유한 값을 갖는 필드만 인덱스해야 한다.



5. **B-트리**

   - 인덱스는 보통 B- 트리라는 자료구조로 이루어져 있음. 루트노드, 리프노드, 브랜치노드로 나뉨
   -  칼럼의 값을 변형하지 않고(사실 값의 앞부분만 잘라서 관리한다.), 원래의 값을 이용해 인덱싱하는 알고리즘
   - 대수확장성의 이유로 주로 B-트리 알고리즘을 사용함

   

6. **해시 알고리즘**
   
   - 칼럼의 값으로 해시 값을 계산해서 인덱싱하는 알고리즘으로 매우 빠른 검색을 지원한다. 하지만 값을 변형해서 인덱싱하므로, 특정 문자로 시작하는 값으로 검색을 하는 전방 일치와 같이 값의 일부만으로 검색하고자 할 때는 해시 인덱스를 사용할 수 없다. 주로 메모리 기반의 데이터베이스에서 많이 사용한다.
   
   
   
7. **DML이 일어났을 때의 상황**

   - INSERT

     기존 Block에 여유가 없을 때, 새로운 Data가 입력된다.

     → 새로운 Block을 할당 받은 후, Key를 옮기는 작업을 수행한다.

     → Index split 작업 동안, 해당 Block의 Key 값에 대해서 DML이 블로킹 된다. (대기 이벤트 발생)
   
   
      - DELETE
   
        <Table과 Index 상황 비교>
   
        Table에서 data가 delete 되는 경우 : Data가 지워지고, 다른 Data가 그 공간을 사용 가능하다.
   
        Index에서 Data가 delete 되는 경우 : Data가 지워지지 않고, 사용 안 됨 표시만 해둔다.
   
        → **Table의 Data 수와 Index의 Data 수가 다를 수 있음**
   
   
      - UPDATE
   
        Table에서 update가 발생하면 → Index는 Update 할 수 없다.
   
        Index에서는 **Delete가 발생한 후, 새로운 작업의 Insert 작업** / 2배의 작업이 소요되어 힘들다.
